![picture](wireguard.png)

# Setup your own VPN server with WireGuard on Ubuntu

## Why WireGuard?

1. It is very simple to setup a WireGuard VPN server. I have setup kinds of VPN servers, such like L2TP, IKEv2 and OpenVPN. The WireGuard is the most simple VPN server to be setup.

2. See below graphs.

![picture](wireguard-vpn.png)
![picture](wireguard-vpn-speed.png)

## Setup WireGuard server

Run below commands on the server.

1. `sudo add-apt-repository ppa:wireguard/wireguard`
2. `sudo apt install wireguard`
3. `sudo su`
4. `cd /etc/wireguard`
5. `umask 077`
6. `wg genkey | tee private.key | wg pubkey > public.key`
7. `vi wg0.conf` **Copy the content of server.conf. Replace the PrivateKey value with the content of private.key which generated by previous command.**
8. wg-quick up wg0
9. systemctl enable wg-quick@wg0
10. sysctl -w net.ipv4.ip_forward=1
11. sysctl -p

## Setup WireGuard client

### Windows
1. Download wireguard software from https://www.wireguard.com/install/
2. Launch WireGuard.
3. Click `Add Tunnel` button.
4. Choose `Add empty tunnel...`.
5. Enter a name.
6. Append `Address` and `DNS` to the `[interface]` section.
7. Add the server info to a `[peer]` section.

It should look like below.

[Interface]
PrivateKey = iKB/c9cZCSYwGMGgJ6r/OJOBXaLgapgfhsrRZD+aGEo=
Address = 10.0.9.2/24
DNS = 1.1.1.1

[Peer]
PublicKey = JbnFipIs+E8B1F9AniNd7OnPjGBTbO3iBGUgONmA+yM=
AllowedIPs = 0.0.0.0/0
Endpoint = <server-public-ip>:6001

Notes:

***
Do not change the PrivateKey under the [interface] section.
The Address value must be different with the server and other clients. In this sample, we set the server address to 10.0.9.1 and the first client to 10.0.9.2
You can set other DNS address, such like 8.8.8.8 under the [interface] section.
Copy the content of the server's public.key to the PublicKey under the [peer] section.
Set the server's public IP address to the Endpoint under the [peer] section.
***


